function preload(){Zgame.preload()}function create(){Zgame.create()}function update(){Zgame.update()}function render(){Zgame.render()}var Texto=function(){WebFontConfig={google:{families:["VT323","monospace"]}};return{precharge:function(){game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js")},creatingText:function(){this.text1=game.add.text(260,50),this.text1.anchor.setTo(.5),this.text1.width=200,this.text1.font="VT323",this.text1.fontSize=60,this.text1.fill="#FFF",this.text1.inputEnabled=!0,this.text1.fresh=!0,this.text2=game.add.text(600,50),this.text2.anchor.setTo(.5),this.text2.width=200,this.text2.font="VT323",this.text2.fill="#FFF",this.text2.inputEnabled=!0,this.text2.fresh=!0,this.text3=game.add.text(1e3,50),this.text3.anchor.setTo(.5),this.text3.width=200,this.text3.font="VT323",this.text3.fontSize=30,this.text3.fill="#FFF",this.text3.inputEnabled=!0,this.text3.fresh=!0,this.text4=game.add.text(30,700),this.text4.anchor.setTo(.5),this.text4.width=200,this.text4.font="VT323",this.text4.fontSize=30,this.text4.fill="#FFF",this.text4.inputEnabled=!0,this.text4.fresh=!0,this.text5=game.add.text(1160,700),this.text5.anchor.setTo(.5),this.text5.width=200,this.text5.font="VT323",this.text5.fontSize=30,this.text5.fill="#FFF",this.text5.inputEnabled=!0,this.text5.fresh=!0},updateA:function(e){this.text1.setText(e)},updateB:function(e,t){this.text2.setText(e),this.text2.fontSize=t},updateC:function(e){this.text3.setText(e)},updateD:function(e){this.text4.setText(e)},updateE:function(e){this.text5.setText(e)}}}(),BarLife=function(e){var t=0,i=0,o=function(e){};return{lifeBar:function(e){var t={width:500,height:40,x:e/2,y:50,bg:{color:"#0CB5E5"},bar:{color:"#70FF01"},animationDuration:200,flipped:!1};this.myHealthBar=new HealthBar(game,t)},initLife:function(){this.myHealthBar.setPercent(0),t=0,i=0},damage:function(a){i=t+=a,this.myHealthBar.setPercent(i),o(i),e.updateA("INDICE:"+i),i<=0&&e.updateA("INDICE:0"),t<33?(e.updateB("SOBRESALIENDO",60),this.myHealthBar.setBarColor("#70FF01")):(e.updateB("PELIGRO: ZONA DE ESCASEZ",30),this.myHealthBar.setBarColor("#E50000")),i>=100&&(e.updateA("100 :( "),e.updateB("GAME OVER",60),setTimeout(function(){alert("CONTINUA JUGANDO"),location.reload()},3e3)),e.updateC("stage 1")},restore:function(o){i=(t-=o)<=0?0:t,this.myHealthBar.setPercent(i),i<=0&&e.updateA("INDICE:0")},getScore:o}}(Texto),Characters={createCharacters:function(){game.load.spritesheet("robot","images/robot.png",80,111)},setMainCharacter:function(){return this.speed=10,this.robot=game.add.sprite(game.world.centerX,130,"robot"),game.physics.arcade.enable(this.robot),this.robot.anchor.set(.5,.5),this.robot.animations.add("idle",[0,1,2,3,4,5,6,7,8,9],12,!0),this.robot.animations.add("run",[10,11,12,13,14,15,16,17],12,!0),this.robot.animations.play("idle",[0,1,2,3],12,!0),this.robot.body.collideWorldBounds=!0,this.robot.body.bounce.y=.2,this.robot.body.gravity.y=400,this.robot.z=5,this.robot},moveCharacters:function(){game.input.keyboard.isDown(Phaser.Keyboard.LEFT)||game.input.keyboard.isDown(Phaser.Keyboard.A)?(this.robot.x-=this.speed,this.robot.play("run"),this.robot.scale.x=-1):game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)||game.input.keyboard.isDown(Phaser.Keyboard.D)?(this.robot.x+=this.speed,this.robot.play("run"),this.robot.scale.x=1):this.robot.play("idle"),jumpButton.isDown&&game.time.now>jumpTimer&&(this.robot.body.velocity.y=-250,jumpTimer=game.time.now+750),game.input.mousePointer.isDown&&game.physics.arcade.moveToPointer(this.robot,400),game.input.mousePointer.isUp&&(this.robot.body.velocity.x=0)},lColliding:function(){robot.body.touching.left&&emitter1.forEachAlive(function(e){e.body.acceleration.x=-80,e.body.acceleration.y=30}),robot.body.velocity.x=0},rColliding:function(){robot.body.touching.right&&emitter2.forEachAlive(function(e){e.body.acceleration.x=80,e.body.acceleration.y=30}),robot.body.velocity.x=0}},Emittor={preloading:function(){game.load.image("particle1","images/partucula.png"),game.load.image("particle2","images/partucula2.png")},emitor:function(e,t,i,o,a){return emitter=game.add.emitter(e,t,1),emitter.name=o,emitter.enableBody=!0,"izquierda"==emitter.name&&emitter.makeParticles(["particle1"]),"derecha"==emitter.name&&emitter.makeParticles(["particle2"]),emitter.start(!1,8e3,400),emitter.setXSpeed(i,20),emitter.setYSpeed(10,20),emitter.gravity=150,emitter.bounce.setTo(a,1),emitter.setAll("body.collideWorldBounds",!0),game.physics.arcade.enable(emitter),emitter},destroyer1:function(){emitter1.forEachAlive(function(e){e.kill()})},destroyer2:function(){emitter2.forEachAlive(function(e){e.kill()})}},Enemies={addEnemies:function(){game.load.spritesheet("enemy1","images/peresozin.png",0,0),game.load.spritesheet("enemy2","images/sinSalud.png",0,0),game.load.spritesheet("enemy3","images/vaguinho.png",0,0),game.load.spritesheet("enemy4","images/shiquilin.png",0,0),game.load.spritesheet("enemy5","images/bigboss.png",0,0)},addPeresozin:function(){return this.peresozin=game.add.sprite(game.world.width-80,130,"enemy1"),this.peresozin.anchor.set(.5,.5),game.physics.arcade.enable(this.peresozin),this.peresozin.body.bounce.y=.2,this.peresozin.body.gravity.y=400,this.peresozin},addSickBoy:function(){return this.sickBoy=game.add.sprite(50,130,"enemy2"),this.sickBoy.anchor.set(.5,.5),game.physics.arcade.enable(this.sickBoy),this.sickBoy.body.bounce.y=.2,this.sickBoy.body.gravity.y=400,this.sickBoy},removePeresozin:function(){this.peresozin.destroy()},removeSickBoy:function(){this.sickBoy.destroy()},addVaguinho:function(){return this.vaguinho=game.add.sprite(game.world.width-80,130,"enemy3"),this.vaguinho.anchor.set(.5,.5),game.physics.arcade.enable(this.vaguinho),this.vaguinho.body.bounce.y=.2,this.vaguinho.body.gravity.y=400,this.vaguinho},addShiquilin:function(){return this.shiquilin=game.add.sprite(50,130,"enemy4"),this.shiquilin.anchor.set(.5,.5),game.physics.arcade.enable(this.shiquilin),this.shiquilin.body.bounce.y=.2,this.shiquilin.body.gravity.y=400,this.shiquilin},removeVaguinho:function(){this.vaguinho.destroy()},removeShiquilin:function(){this.shiquilin.destroy()},addBigBoss:function(){return this.bigBoss=game.add.sprite(game.world.width-80,130,"enemy5"),this.bigBoss.anchor.set(.5,.5),game.physics.arcade.enable(this.bigBoss),this.bigBoss.body.bounce.y=.2,this.bigBoss.body.gravity.y=400,this.bigBoss}},Stage=function(e,t,i,o){var a,s,r,n=new Array,d=new Array,m=function(e,t){for(var i=0==t?0:t-80,o=0;o<e;o++)(r=platforms.create(i,200+35*o,"ground")).width=80,r.body.immovable=!0,r.body.bounce.setTo(.5,.5),0==i?(r.name="pila"+o,d.push(r)):(r.name="pola"+o,n.push(r))},h=function(){t.initLife(),HomeLevel("casita1"),t.initLife(),o.removePeresozin(),o.removeSickBoy(),m(14,1200),m(14,0),i.updateC("stage 2"),vaguinho=o.addVaguinho(),shiquilin=o.addShiquilin()},l=function(){t.initLife(),HomeLevel("casita1"),t.initLife(),o.removeVaguinho(),o.removeShiquilin(),m(14,1200),i.updateC("stage 3"),bigBoss=o.addBigBoss(),emitter1.destroy()};return{preloadPlatforms:function(){game.load.image("piso0","images/platform.png"),game.load.image("piso1","images/platform.png"),game.load.image("piso2","images/platform.png"),game.load.image("ground","images/platform.png")},setHouse:function(){game.load.image("casita1","images/casita.png")},createPlatforms:m,groupPlatforms:function(){(platforms=game.add.group()).enableBody=!0;var e=platforms.create(0,game.world.height-32,"ground");e.name="piso0",e.scale.x=800,e.body.immovable=!0;(s=platforms.create(game.world.centerX-200,350,"piso2")).width=400,s.name="piso2",s.body.immovable=!0;(a=platforms.create(game.world.centerX-325,500,"piso1")).width=650,a.name="piso1",a.body.immovable=!0},houseAdder:function(){game.add.sprite(game.world.centerX-300,178,"casita1")},fallBlocksRight:function(e){for(var t=0;t<e;)n[t].body.y=n[t].body.y+2+n[t].height,t++;n.splice(e,1)},fallBlocksLeft:function(e){for(var t=0;t<e;)d[t].body.y=d[t].body.y+2+d[t].height,t++;d.splice(e,1)},collideBlockLeft:function(o,a){var s=a.name.slice(0,4);if("piso1"!=a.name&&"piso2"!=a.name||t.damage(1),"piso0"!=a.name&&"piso1"!=a.name&&"piso2"!=a.name&&"pila"==s){var r;r=d.indexOf(a),a.destroy(),Stage.fallBlocksLeft(r),e.destroyer1(),t.restore(2);var n=d.length;i.updateD(n)}},collideBlockRight:function(o,a){var s=a.name.slice(0,4);if("piso1"!=a.name&&"piso2"!=a.name||t.damage(1),"piso0"!=a.name&&"piso1"!=a.name&&"piso2"!=a.name&&"pola"==s){var r;r=n.indexOf(a),a.destroy(),Stage.fallBlocksRight(r),e.destroyer2(),t.restore(2);var d=n.length;i.updateE(d)}},setStage:function(){0==d.length&&0==n.length&&1==stageSelector&&(stageSelector=2,h()),0==d.length&&0==n.length&&2==stageSelector&&(stageSelector=3,l())},loadingStage2:h}}(Emittor,BarLife,Texto,Enemies),Zgame=function(e,t,i,o,a,s){return{preload:function(){game.physics.startSystem(Phaser.Physics.P2JS),game.time.desiredFps=30,o.preloading(),s.preloadPlatforms(),s.setHouse(),i.createCharacters(),a.addEnemies(),e.precharge()},create:function(){cursors=game.input.keyboard.createCursorKeys(),jumpButton=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),s.houseAdder(),robot=i.setMainCharacter(),peresozin=a.addPeresozin(),sickBoy=a.addSickBoy(),emitter1=o.emitor(100,100,300,"izquierda",.5),emitter2=o.emitor(game.world.width-63,100,-300,"derecha",.5),s.groupPlatforms(),s.createPlatforms(14,game.world.width),s.createPlatforms(14,0),t.lifeBar(game.world.width),t.initLife(),e.creatingText()},update:function(){game.physics.arcade.collide(robot,platforms),game.physics.arcade.collide(emitter1,platforms,s.collideBlockLeft),game.physics.arcade.collide(emitter2,platforms,s.collideBlockRight),game.physics.arcade.collide(emitter1,robot,i.lColliding),game.physics.arcade.collide(emitter2,robot,i.rColliding),game.physics.arcade.collide(emitter1,emitter2);i.moveCharacters(),s.setStage(),1==stageSelector&&(emitter1.y=sickBoy.body.y,emitter2.y=peresozin.body.y,game.physics.arcade.collide(peresozin,platforms),game.physics.arcade.collide(sickBoy,platforms));2==stageSelector&&(emitter1.y=shiquilin.body.y,emitter2.y=vaguinho.body.y,game.physics.arcade.collide(shiquilin,platforms),game.physics.arcade.collide(vaguinho,platforms));3==stageSelector&&(emitter2.y=bigBoss.body.y,game.physics.arcade.collide(bigBoss,platforms))},render:function(){}}}(Texto,BarLife,Characters,Emittor,Enemies,Stage),game=new Phaser.Game(1200,720,Phaser.CANVAS,"phaser-example",{preload:preload,create:create,update:update,render:render}),jumpButton,jumpTimer=0,platforms,emitter1,emitter2,ground,speed,robot,stageSelector=1;
//# sourceMappingURL=maps/gameMotor.min.js.map
